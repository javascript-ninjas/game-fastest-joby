!function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(2),o=function s(){a(this,s),this.game=new n.Game},i=new o;i.game.setup()},function(e,t,r){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(){function e(t){n(this,e),this.score=0,this.game=t}return o(e,[{key:"getSprite",value:function(){return this._sprite}},{key:"_setupSprite",value:function(){this._sprite=this.game.add.sprite(0,160,this.spriteName)}},{key:"updateBody",value:function(){var e;this._sprite.body.collideWorldBounds=!0,this._sprite.body.setSize(32,22,0,5),this._scoreText=(e=this.game.add).text.apply(e,a(this.scorePosition).concat(["",{fontSize:"16px",fill:"#fff"}])),this._scoreText.fixedToCamera=!0,this._scoreText.setShadow(3,3,"rgba(0,0,0,0.5)",5)}},{key:"refreshScore",value:function(){this._scoreText.setText(this.name+" score: "+this.score+" points")}},{key:"supportCarMove",value:function(e){e.up.isDown&&(this._sprite.body.y-=2.5),e.down.isDown&&(this._sprite.body.y+=2.5),e.left.isDown&&(this._sprite.body.x-=3.5),e.right.isDown&&(this._sprite.body.x+=3.5)}}]),e}();t.AbstractPlayer=i},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(u){n=!0,o=u}finally{try{!a&&s["return"]&&s["return"]()}finally{if(n)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=r(3),s=r(5),u=r(4),c=[],l=function(e){c=c.sort(function(e,t){return e.score<t.score?1:e.score>t.score?-1:0});var t=c.map(function(e,t){return t+1+". "+e.name+": "+e.score+" points"});e.add.text(f.WIDTH-300,40,t.join("\n"),{fontSize:"24px",fill:"#fff"})},p=function(){c.forEach(function(e,t){e.getSprite().destroy(),delete c[t]}),c=[]},d=function(e,t,r,a){t.forEach(function(t){var o=n(t,2),i=o[0],s=o[1];r.add(e.add.tileSprite(32*i,32*s,32,32,"2-32x32",a))}),r.enableBody=!0},f=function(){function e(){a(this,e),i.Loader.update(10)}return o(e,[{key:"setup",value:function(){i.Loader.update(20);var t=new Phaser.Game(e.WIDTH,e.HEIGHT,Phaser.AUTO,"canvas");t.state.add("Boot",this.stateBoot),t.state.add("Preload",this.statePreload),t.state.add("TheGame",this.stateTheGame),t.state.add("GameOver",this.stateGameOver),t.state.add("Winner",this.stateWinner),t.state.start("Boot"),i.Loader.update(30)}},{key:"stateBoot",value:function(){return{preload:function(){this.game.load.spritesheet("2-32x32","assets/spritesheets/2-32x32.png",32,32),i.Loader.update(40),this.game.load.image("car-1","assets/sprites/car-1.png",32,32),this.game.load.image("car-2","assets/sprites/car-2.png",32,32),i.Loader.update(50),this.game.load.image("game-title","assets/images/backgrounds/game-title.png"),this.game.load.image("game-over","assets/images/backgrounds/game-over.png"),this.game.load.image("game-winner","assets/images/backgrounds/game-winner.png"),i.Loader.update(60),this.game.load.tilemap("map-1","assets/tilemaps/map-1.json",null,Phaser.Tilemap.TILED_JSON),i.Loader.update(70),this.game.load.image("button-play","assets/images/buttons/button-play.png"),this.game.load.image("button-retry","assets/images/buttons/button-retry.png"),i.Loader.update(80)},create:function(){var e=this;setTimeout(function(){e.game.state.start("Preload")},1e3)}}}},{key:"statePreload",value:function(){return{preload:function(){i.Loader.update(90),this.game.add.sprite(0,0,"game-title");var t=this.game.add.button(e.WIDTH/2,e.HEIGHT/1.3,"button-play",this.playTheGame,this);t.anchor.setTo(.5,.5),i.Loader.update(100),i.Loader.hide()},playTheGame:function(){this.game.state.start("TheGame")}}}},{key:"stateTheGame",value:function(){var e=void 0,t=void 0,r=void 0,a=void 0,n=void 0,o=[[3,1],[7,4],[15,5],[22,8],[29,1],[44,1],[51,8],[64,5],[72,2],[89,6],[97,8]],i=void 0,l=[[4,8],[20,1],[45,8],[57,1],[77,3],[99,2]],p=void 0,f=[[8,8],[21,4],[56,8]];return{preload:function(){console.clear(),n=this.game.add.group(),i=this.game.add.group(),p=this.game.add.group(),d(this.game,o,n,79),d(this.game,l,i,171),d(this.game,f,p,28),e=this.game.add.tilemap("map-1"),e.addTilesetImage("2-32x32"),e.setCollisionBetween(1,256),t=e.createLayer("Tile Layer 1"),t.resizeWorld()},create:function(){this.game.physics.arcade.enable(n),this.game.physics.arcade.enable(i),this.game.physics.arcade.enable(p),r=new s.Player(this.game),c.push(r),this.game.camera.follow(r.getSprite()),this.game.physics.arcade.enable(r.getSprite()),r.updateBody(),r.refreshScore(),a=new u.Enemy(this.game),c.push(a),this.game.camera.follow(a.getSprite()),this.game.physics.arcade.enable(a.getSprite()),a.updateBody(),a.refreshScore()},applyRules:function(e){var r=this,a=e.getControl();e.supportCarMove(a),this.game.physics.arcade.collide(e.getSprite(),t),this.game.physics.arcade.collide(e.getSprite(),n,function(t,r){r.destroy(),e.score+=10,e.refreshScore()}),this.game.physics.arcade.collide(e.getSprite(),i,function(t,r){r.destroy(),e.score+=50,e.refreshScore()}),this.game.physics.arcade.collide(e.getSprite(),p,function(e,t){t.destroy(),r.game.state.start("GameOver")}),this.game.world.width-e.getSprite().x-e.getSprite().width<=0&&this.game.state.start("Winner")},update:function(){this.applyRules(r),this.applyRules(a)}}}},{key:"stateGameOver",value:function(){return{preload:function(){this.game.add.sprite(0,0,"game-over");var t=this.game.add.button(e.WIDTH/2,e.HEIGHT/1.3,"button-retry",this.retryTheGame,this);t.anchor.setTo(.5,.5),l(this.game),p()},retryTheGame:function(){this.game.state.start("TheGame")}}}},{key:"stateWinner",value:function(){return{preload:function(){this.game.add.sprite(0,0,"game-winner");var t=this.game.add.button(e.WIDTH/2,e.HEIGHT/1.3,"button-retry",this.oneMoreTimeTheGame,this);t.anchor.setTo(.5,.5),l(this.game),p()},oneMoreTimeTheGame:function(){this.game.state.start("TheGame")}}}}]),e}();t.Game=f,f.WIDTH=800,f.HEIGHT=320},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=document.querySelector("#loader"),i=document.querySelector("#loader-progress"),s=function(){function e(){a(this,e)}return n(e,null,[{key:"update",value:function(t){var r=e._castPercentToWidth(t);setTimeout(function(){i.style.width=r},0)}},{key:"_castPercentToWidth",value:function(t){return t*e.WIDTH/100+"px"}},{key:"show",value:function(){o.style.display="block"}},{key:"hide",value:function(){setTimeout(function(){i.style.width=0,o.style.display="none"},50)}}]),e}();t.Loader=s,s.WIDTH=130},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){for(var a=!0;a;){var n=e,o=t,i=r;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(i)}var c=Object.getPrototypeOf(n);if(null===c)return void 0;e=c,t=o,r=i,a=!0,s=c=void 0}},s=r(1),u=function(e){function t(e){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,Array.prototype.slice.call(arguments)),this.name="Enemy",this.spriteName="car-1",this.scorePosition=[600,5],this._setupSprite(),console.info("new Enemy()")}return n(t,e),o(t,[{key:"getControl",value:function(){var e=this.game.input.keyboard.createCursorKeys();return e.up=this.game.input.keyboard.addKey(Phaser.Keyboard.W),e.down=this.game.input.keyboard.addKey(Phaser.Keyboard.S),e.left=this.game.input.keyboard.addKey(Phaser.Keyboard.A),e.right=this.game.input.keyboard.addKey(Phaser.Keyboard.D),e}}]),t}(s.AbstractPlayer);t.Enemy=u},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){for(var a=!0;a;){var n=e,o=t,i=r;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(i)}var c=Object.getPrototypeOf(n);if(null===c)return void 0;e=c,t=o,r=i,a=!0,s=c=void 0}},s=r(1),u=function(e){function t(e){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,Array.prototype.slice.call(arguments)),this.name="Player",this.spriteName="car-2",this.scorePosition=[20,5],this._setupSprite(),console.info("new Player()")}return n(t,e),o(t,[{key:"getControl",value:function(){return this.game.input.keyboard.createCursorKeys()}}]),t}(s.AbstractPlayer);t.Player=u}]);